{{/*  
  DOCUMENTATION :
  Prepare les fichier scss en css (de assets à static). Est utilisé par layouts/partials/head/stylesheet.html qui envoie /scss/app.scss (qui lui-même concatène un ensemble de fichiers scss )
*/}}

{{ $css := "" }}
{{ if eq (hugo.Environment) "development" -}}

  {{ $options := (dict "targetPath" "main.css" "transpiler" "libsass" "enableSourceMap" true "includePaths" (slice "node_modules")) -}}
  {{ $css = resources.Get . | toCSS $options  | resources.Fingerprint "sha512" -}}

{{ else -}}

  {{ $options := (dict "targetPath" "main.css" "transpiler" "libsass" "outputStyle" "compressed" "includePaths" (slice "node_modules")) -}}
  {{ $css = resources.Get . | toCSS $options | postCSS (dict "config" "config/postcss.config.js") | resources.Fingerprint "sha512" -}}
  
{{ end -}}

<link rel="stylesheet" href="{{ $css.Permalink | relURL }}" integrity="{{ $css.Data.Integrity }}" crossorigin="anonymous">